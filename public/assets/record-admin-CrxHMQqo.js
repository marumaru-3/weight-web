import{b as l,c as d}from"./main.js";import{a as m,f as u,i as r,d as f,e as w}from"./form-validate-CVHGrpdv.js";const p=t=>{m(),u("input[data-float]");const o=document.querySelector(".modal-record-admin");if(t){const a=t.date.replace(/-/g,"/");o.querySelector(".date__contents").textContent=a,o.querySelector("#recorded_at").value=a,o.querySelector("#weight").value=t.weight,o.querySelector("#memo").value=t.memo||""}r(),document.addEventListener("input",r),document.addEventListener("change",r);const e=document.getElementById("record-form");e&&(e.addEventListener("submit",async i=>{if(i.preventDefault(),f(),!w(e)){console.log("バリデーションエラー： フォーム送信をキャンセル");return}const n=new FormData(e),c=await l(n);window.history.scrollRestoration="manual",window.location.reload(),c.success||alert(c.message)}),document.getElementById("delete-btn").addEventListener("click",async i=>{i.preventDefault();const s=new FormData(e),n=await d(s);window.history.scrollRestoration="manual",window.location.reload(),n.success||alert(n.message)}))};export{p as init};
