import{g as o,i as a}from"./main.js";import{a as d,i as c,b as r,f as l,d as m,e as u}from"./form-validate-CVHGrpdv.js";import{i as p}from"./form-date-DC5VUZ3x.js";const g=()=>{document.getElementById("btn--go-to-step2").addEventListener("click",f),document.getElementById("btn--back-to-step1").addEventListener("click",y)},f=()=>{document.getElementById("step1").classList.add("hidden"),document.getElementById("step1").classList.remove("visible"),document.getElementById("step2").classList.add("visible"),document.getElementById("step2").classList.remove("hidden")},y=()=>{document.getElementById("step2").classList.add("hidden"),document.getElementById("step2").classList.remove("visible"),document.getElementById("step1").classList.add("visible"),document.getElementById("step1").classList.remove("hidden")},v=()=>{p(),d(),c(),r("input[data-alphanumeric]"),l("input[data-float]"),g();const e=document.getElementById("register-form");e&&e.addEventListener("submit",async i=>{if(i.preventDefault(),m(),!u(e)){console.log("バリデーションエラー： フォーム送信をキャンセル");return}const n=new FormData(e),s=await o(n),t=document.querySelector(".form-message");s.success?(sessionStorage.setItem("accountCreated","true"),window.location.href=a("/home")):(t.classList.add("error"),t.innerHTML=`新規登録に失敗しました。<br>${s.errorMessage}`,t.style.display="block")})};export{v as init};
